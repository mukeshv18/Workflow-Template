
``yaml name=.github/workflows/CI.yml url=https://github.com/mukeshv18/sample-app-1/blob/main/.github/workflows/CI.yml
name: CI

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]
  workflow_dispatch:

jobs:
  # Call the reusable Build workflow (you already have this in Workflow-Template)
  build:
    uses: mukeshv18/Workflow-Template/.github/workflows/Build.yml@main

  # Zip and publish the jar produced by the build
  zip-and-publish:
    needs: build
    uses: mukeshv18/Workflow-Template/.github/workflows/ZipArtifact.yml@main
    # Two ways to make this work â€” choose one:
    # 1) Preferred: Have your reusable Build.yml upload the produced JAR as an artifact named "built-jar".
    #    Then call ZipArtifact with uploaded_artifact_name: built-jar
    # 2) If Build.yml leaves the jar in the workspace and you want to re-checkout and search, leave uploaded_artifact_name empty.
    with:
      # Option A (recommended if Build.yml uploads the jar):
      uploaded_artifact_name: built-jar
      artifact_name: application-jar-zip
      retention_days: 7
      # Option B (if you want the zip workflow to search the workspace / or you can pass jar_path):
      # uploaded_artifact_name: ''
      # jar_path: 'target/my-app-1.0.0.jar'
    secrets: inherit
